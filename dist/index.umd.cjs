(function(s,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(s=typeof globalThis<"u"?globalThis:s||self,r(s["Patreon-TS"]={}))})(this,function(s){"use strict";var E=Object.defineProperty;var T=(s,r,d)=>r in s?E(s,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[r]=d;var o=(s,r,d)=>(T(s,typeof r!="symbol"?r+"":r,d),d);const r=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),d="https://www.patreon.com/api/oauth2/v2/";async function p(e,t){try{return await(await fetch(e,{headers:{Authorization:`Bearer ${t.access_token}`}})).json()}catch(n){return Promise.reject(n)}}function m(e,t){const n=new URL(e,d);return t&&(n.search=t==null?void 0:t.toString()),n.toString()}const y=(e,t)=>{if(t??(t=new Map),e.attributes){const n=e.type,i=t.get(n)??new Set;for(const[a,l]of Object.entries(e.attributes))l&&i.add(a);t.set(n,i)}if(e.relationships)for(const n of Object.values(e.relationships))n!=null&&y(n,t);return t},h=(e,t,n)=>{if(t??(t=[]),n??(n=new Set),e.relationships)for(const[i,a]of Object.entries(e.relationships)){if(a==null)continue;const l=[...t,i];n.add(l.join(".")),h(a,l,n)}return n};function b(e,t){t??(t=new URLSearchParams);const n=y(e);for(const[a,l]of n.entries())t.set(`fields[${a}]`,[...l].join(","));const i=h(e);return i.size>0&&t.set("include",[...i].join(",")),t}function f(e,t){const n=m(e,b(t));return i=>p(n,i)}function u(e,t){const n=b(t);return(i,...a)=>p(m(e(...a),n),i)}const _=Object.freeze(Object.defineProperty({__proto__:null,campaignById:e=>u(t=>`campaigns/${t}`,e),campaignMembersById:e=>u(t=>`campaigns/${t}/members`,e),campaignPostsById:e=>u(t=>`campaigns/${t}/posts`,e),campaigns:e=>f("campaigns",e),identity:e=>f("identity",e),memberById:e=>u(t=>`members/${t}`,e),postById:e=>u(t=>`posts/${t}`,e),webhookById:e=>u(t=>`webhooks/${t}`,e),webhooks:e=>f("webhooks",e)},Symbol.toStringTag,{value:"Module"}));class c{constructor(t){o(this,"attributes");o(this,"relationships");this.attributes=t==null?void 0:t.attributes,this.relationships=t==null?void 0:t.relationships}}class k extends c{constructor(){super(...arguments);o(this,"type","address")}}class v extends c{constructor(){super(...arguments);o(this,"type","benefit")}}class x extends c{constructor(){super(...arguments);o(this,"type","campaign")}}class w extends c{constructor(){super(...arguments);o(this,"type","deliverable")}}class B extends c{constructor(){super(...arguments);o(this,"type","goal")}}class I extends c{constructor(){super(...arguments);o(this,"type","media")}}class P extends c{constructor(){super(...arguments);o(this,"type","member")}}class j extends c{constructor(){super(...arguments);o(this,"type","pledge")}}class O extends c{constructor(){super(...arguments);o(this,"type","post")}}class M extends c{constructor(){super(...arguments);o(this,"type","tier")}}class $ extends c{constructor(){super(...arguments);o(this,"type","user")}}class A extends c{constructor(){super(...arguments);o(this,"type","user")}}const R=Object.freeze(Object.defineProperty({__proto__:null,AddressSchema:k,BenefitSchema:v,CampaignSchema:x,DeliverableSchema:w,GoalSchema:B,MediaSchema:I,MemberSchema:P,PledgeEventSchema:j,PostSchema:O,TierSchema:M,UserSchema:$,WebhookSchema:A},Symbol.toStringTag,{value:"Module"}));var g=(e=>(e.Refresh="refresh_token",e.Access="access_token",e))(g||{});function S(e){const t=async function(a){const l=await i.accessToken.refresh(a);return S(l)},n=async function(a){e.revoke(a.toString())},i={access_token:e.token.access_token,expires_at:e.token.expires_at,expires_in:e.token.expires_in,refresh_token:e.token.refresh_token,scope:e.token.scope,token_type:e.token.token_type,version:e.token.version,accessToken:e,isExpired:e.expired,refresh:t,revoke:n,revokeAll:e.revokeAll};return i}const z=Object.freeze(Object.defineProperty({__proto__:null,TokenType:g,toPatreonToken:S},Symbol.toStringTag,{value:"Module"}));s.Data=r,s.Endpoints=_,s.Schemas=R,s.Types=z,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
